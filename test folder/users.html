<div class="section-header">
    <h1 class="section-title">
        <i class="fas fa-users"></i>
        User Management
    </h1>
    <p class="section-subtitle">Manage student and admin accounts in the system.</p>
</div>

<!-- User Stats -->
<div class="stats-grid">
    <div class="stat-card primary">
        <div class="stat-icon">
            <i class="fas fa-user-graduate"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number" id="students-count">-</div>
            <div class="stat-label">Total Students</div>
        </div>
    </div>

    <div class="stat-card warning">
        <div class="stat-icon">
            <i class="fas fa-user-shield"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number" id="admins-count">-</div>
            <div class="stat-label">Admin Users</div>
        </div>
    </div>

    <div class="stat-card success">
        <div class="stat-icon">
            <i class="fas fa-user-check"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number" id="active-users">-</div>
            <div class="stat-label">Active Users</div>
        </div>
    </div>

    <div class="stat-card info">
        <div class="stat-icon">
            <i class="fas fa-user-plus"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number" id="new-users">-</div>
            <div class="stat-label">New This Month</div>
        </div>
    </div>
</div>

<!-- Filter Bar -->
<div class="filter-bar">
    <div class="filter-group">
        <label class="filter-label">Role:</label>
        <select class="filter-select" id="role-filter">
            <option value="">All Roles</option>
            <option value="student">Students</option>
            <option value="admin">Admins</option>
        </select>
    </div>
    <div class="filter-group">
        <label class="filter-label">Status:</label>
        <select class="filter-select" id="user-status-filter">
            <option value="">All Status</option>
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
        </select>
    </div>
    <div class="filter-group">
        <label class="filter-label">Department:</label>
        <select class="filter-select" id="department-filter">
            <option value="">All Departments</option>
            <option value="computer_science">Computer Science</option>
            <option value="information_technology">Information Technology</option>
            <option value="software_engineering">Software Engineering</option>
            <option value="cybersecurity">Cybersecurity</option>
        </select>
    </div>
    <button class="filter-btn" data-action="add-new-user">
        <i class="fas fa-user-plus"></i>
        Add New User
    </button>
    <button class="filter-btn" data-action="bulk-import-users">
        <i class="fas fa-upload"></i>
        Bulk Import
    </button>
</div>

<!-- Users Table -->
<div class="table-container">
    <div class="table-header">
        <h3>All Users</h3>
        <div class="table-actions">
            <button class="table-btn" data-action="export-users">
                <i class="fas fa-download"></i>
                Export
            </button>
            <button class="table-btn" data-action="refresh-users">
                <i class="fas fa-sync-alt"></i>
                Refresh
            </button>
            <button class="table-btn" data-action="bulk-actions" disabled>
                <i class="fas fa-cogs"></i>
                Bulk Actions
            </button>
        </div>
    </div>

    <div class="table-loading" id="users-table-loading">
        <div class="loading-spinner">
            <div class="spinner"></div>
        </div>
        <p>Loading users...</p>
    </div>

    <div class="table-empty" id="users-table-empty" style="display: none;">
        <div class="empty-illustration">
            <i class="fas fa-user-slash"></i>
        </div>
        <h3>No Users Found</h3>
        <p>No users match your current filters.</p>
    </div>

    <table class="modern-table" id="users-table" style="display: none;">
        <thead>
            <tr>
                <th>
                    <input type="checkbox" class="table-checkbox" id="select-all-users">
                </th>
                <th>ID</th>
                <th>User Info</th>
                <th>Registration Details</th>
                <th>Role</th>
                <th>Department</th>
                <th>Registration Date</th>
                <th>Last Login</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="users-tbody">
        </tbody>
    </table>

    <div class="pagination-container" id="users-pagination" style="display: none;">
        <div class="pagination-info">
            Showing <span id="users-showing">0</span> of <span id="users-total">0</span> users
        </div>
        <div class="pagination-controls">
            <button class="pagination-btn" id="users-prev" disabled>
                <i class="fas fa-chevron-left"></i>
                Previous
            </button>
            <div class="pagination-numbers" id="users-page-numbers">
            </div>
            <button class="pagination-btn" id="users-next">
                Next
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>
</div>

<!-- Add User Modal -->
<div class="modal-overlay" id="add-user-modal">
    <div class="modal-container large">
        <div class="modal-header">
            <h3 class="modal-title">Add New User</h3>
            <button class="modal-close" data-modal="add-user-modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <form id="add-user-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label>First Name *</label>
                        <input type="text" id="user-first-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Last Name *</label>
                        <input type="text" id="user-last-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Email Address *</label>
                        <input type="email" id="user-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Registration Number</label>
                        <input type="text" id="user-reg-number" class="form-control" placeholder="e.g., CS/2024/001">
                    </div>
                    <div class="form-group">
                        <label>Role *</label>
                        <select id="user-role" class="form-control" required>
                            <option value="">Select Role</option>
                            <option value="student">Student</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Department</label>
                        <select id="user-department" class="form-control">
                            <option value="">Select Department</option>
                            <option value="computer_science">Computer Science</option>
                            <option value="information_technology">Information Technology</option>
                            <option value="software_engineering">Software Engineering</option>
                            <option value="cybersecurity">Cybersecurity</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="user-phone" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Date of Birth</label>
                        <input type="date" id="user-dob" class="form-control">
                    </div>
                    <div class="form-group full-width">
                        <label>Initial Password *</label>
                        <input type="password" id="user-password" class="form-control" required>
                        <small class="form-help">User will be required to change password on first login</small>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" data-modal="add-user-modal">Cancel</button>
            <button class="btn-primary" id="save-new-user">
                <i class="fas fa-save"></i>
                Create User
            </button>
        </div>
    </div>
</div>

<!-- User Details Modal -->
<div class="modal-overlay" id="user-details-modal">
    <div class="modal-container">
        <div class="modal-header">
            <h3 class="modal-title">User Details</h3>
            <button class="modal-close" data-modal="user-details-modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body" id="user-details-content">
            <!-- Content will be loaded dynamically -->
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" data-modal="user-details-modal">Close</button>
            <button class="btn-primary" id="edit-user-btn">Edit User</button>
        </div>
    </div>
</div>

<!-- Edit User Modal -->
<div class="modal-overlay" id="edit-user-modal">
    <div class="modal-container large">
        <div class="modal-header">
            <h3 class="modal-title">Edit User</h3>
            <button class="modal-close" data-modal="edit-user-modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <form id="edit-user-form">
                <!-- Similar form structure as add user -->
                <div class="form-grid">
                    <div class="form-group">
                        <label>First Name *</label>
                        <input type="text" id="edit-user-first-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Last Name *</label>
                        <input type="text" id="edit-user-last-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Email Address *</label>
                        <input type="email" id="edit-user-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Registration Number</label>
                        <input type="text" id="edit-user-reg-number" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Role *</label>
                        <select id="edit-user-role" class="form-control" required>
                            <option value="student">Student</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status *</label>
                        <select id="edit-user-status" class="form-control" required>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="suspended">Suspended</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" data-modal="edit-user-modal">Cancel</button>
            <button class="btn-primary" id="save-user-changes">
                <i class="fas fa-save"></i>
                Save Changes
            </button>
        </div>
    </div>
</div>